<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Create Your AI Voice Agent</title>
    <link rel="stylesheet" href="/static/css/styles.css">
</head>
<body>
    <header>
        <div class="container">
            <h1>Create Your AI Voice Agent</h1>
            <p class="subtitle">Record your voice and create an AI agent that sounds like you</p>
        </div>
    </header>
    
    <main class="container">
        <div class="card">
            <div class="card-header">
                <h2>Create Your AI Voice Profile</h2>
            </div>
            
            <div class="card-body">
                <form id="voiceCloneForm">
                    <!-- Hidden fields for voice API -->
                    <input type="hidden" id="voiceName" name="voiceName">
                    <input type="hidden" id="voiceDescription" name="voiceDescription">
                    
                    <!-- Profile Information -->
                    <div class="form-section">
                        <h3>Basic Information</h3>
                        <div class="form-group">
                            <label for="profileName">Your Name</label>
                            <input type="text" id="profileName" name="profileName" placeholder="Enter your name" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="profileTitle">Professional Title (Optional)</label>
                            <input type="text" id="profileTitle" name="profileTitle" placeholder="e.g., Software Engineer, Doctor, Teacher">
                        </div>
                        
                        <div class="form-group">
                            <label for="profileBio">Short Bio (Optional)</label>
                            <textarea id="profileBio" name="profileBio" rows="3" placeholder="Tell us a bit about yourself, your expertise, or your interests"></textarea>
                        </div>
                    </div>
                    
                    <!-- Voice Interview Section -->
                    <div class="form-section">
                        <h3>Tell Us About Yourself</h3>
                        <p class="section-description">
                            Answer a few questions by voice to help your AI agent represent you better.
                            Your voice recordings will be used to create your AI voice.
                        </p>
                        
                        <div class="tip">
                            <strong>Tip:</strong> For best results, speak clearly in a quiet environment. Your voice recordings will be combined to create your AI voice.
                        </div>
                        
                        <!-- Sample Script -->
                        <div class="sample-script">
                            <h4>Sample Script (Optional)</h4>
                            <p>Hello, my name is [Your Name]. I'm a [Your Profession] with expertise in [Your Areas of Expertise]. I'm passionate about [Your Interests]. In my free time, I enjoy [Your Hobbies]. I'm creating this AI voice agent to help answer questions about my work, experience, or opinions on relevant topics.</p>
                        </div>
                        
                        <!-- Interview Start -->
                        <div id="interviewStart" class="interview-start">
                            <p>Let's start with some questions to get to know you better. Ready to begin?</p>
                            <button type="button" id="startInterviewBtn" class="btn primary-btn">Start Voice Interview</button>
                        </div>
                        
                        <!-- Question Display (initially hidden) -->
                        <div id="questionContainer" class="question-container" style="display: none;">
                            <p class="question-text">Loading question...</p>
                        </div>
                        
                        <!-- Response Container -->
                        <div id="responseContainer" class="response-container" style="display: none;">
                            <!-- Recording Controls -->
                            <div class="recording-controls">
                                <button type="button" id="recordButton" class="btn record-btn">
                                    <span class="record-icon"></span>Record Answer
                                </button>
                                
                                <div id="visualizer-container" class="audio-visualizer">
                                    <canvas id="visualizer"></canvas>
                                    <div id="recordingTimer" class="recording-timer">00:00</div>
                                </div>
                            </div>
                            
                            <!-- Audio Player -->
                            <div class="audio-player" style="display: none;">
                                <audio id="recordedAudio" controls></audio>
                            </div>
                            
                            <!-- Navigation Controls -->
                            <div class="interview-controls">
                                <button type="button" id="nextQuestionBtn" class="btn secondary-btn">Next Question</button>
                                <button type="button" id="finishInterviewBtn" class="btn primary-btn" style="display: none;">Finish Interview</button>
                            </div>
                        </div>
                        
                        <!-- Interview Progress -->
                        <div id="interviewProgress" class="interview-progress" style="display: none;">
                            <div class="progress-bar">
                                <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                            </div>
                            <div class="progress-text">
                                Question <span id="currentQuestionNum">1</span> of <span id="totalQuestions">5</span>
                            </div>
                        </div>
                        
                        <!-- Interview Summary (shown after completion) -->
                        <div id="interviewSummary" class="interview-summary" style="display: none;">
                            <h4>Interview Complete!</h4>
                            <p>Thank you for completing the interview. Your voice has been recorded and will be used to create your AI agent.</p>
                            <div class="summary-container">
                                <div id="responseSummary" class="response-summary"></div>
                            </div>
                        </div>
                        
                        <!-- Sample Voice Option -->
                        <div class="sample-voice-option">
                            <p>Don't want to record? Use our sample voice instead:</p>
                            <button type="button" id="useSampleVoice" class="btn secondary-btn">Use Sample Voice Instead</button>
                        </div>
                    </div>
                    
                    <!-- Document Upload Section -->
                    <div class="form-section">
                        <h3>Upload Documents (Optional)</h3>
                        <p class="section-description">
                            Upload documents to give your AI agent knowledge about specific topics.
                        </p>
                        
                        <form id="documentUploadForm">
                            <div class="form-group">
                                <label for="documentFile">Select Document</label>
                                <input type="file" id="documentFile" name="documentFile" accept=".pdf,.docx,.txt,.md">
                                <button type="submit" id="uploadDocumentButton" class="btn secondary-btn">Upload Document</button>
                            </div>
                        </form>
                        
                        <div id="documentStatus" class="status-message" style="display: none;">
                            <div class="loader"></div>
                            <p>Uploading document...</p>
                        </div>
                        
                        <div id="documentsContainer" class="documents-container">
                            <p class="no-documents">No documents uploaded yet.</p>
                        </div>
                    </div>
                    
                    <!-- Submit Button -->
                    <div class="form-actions">
                        <button type="submit" id="createVoiceButton" class="btn primary-btn" disabled>Create AI Agent</button>
                    </div>
                    
                    <!-- Status Messages -->
                    <div id="cloneStatus" class="status-message" style="display: none;">
                        <div class="loader"></div>
                        <p>Creating your AI agent... This may take a minute.</p>
                    </div>
                </form>
                
                <!-- Result Section -->
                <div id="cloneResult" class="result-section" style="display: none;">
                    <h3>Your AI Agent is Ready!</h3>
                    <p>Congratulations! Your AI agent <strong id="resultAgentName"></strong> has been created successfully.</p>
                    
                    <div class="result-details">
                        <p>Voice ID: <span id="resultVoiceId" class="voice-id"></span></p>
                    </div>
                    
                    <div class="share-section">
                        <h4>Share Your AI Agent</h4>
                        <div class="share-link-container">
                            <input type="text" id="shareLink" readonly>
                            <button id="copyLink" class="btn secondary-btn">Copy</button>
                        </div>
                    </div>
                    
                    <div class="test-section">
                        <h4>Test Your AI Voice</h4>
                        <div class="form-group">
                            <label for="testText">Enter text to speak</label>
                            <textarea id="testText" rows="3" placeholder="Type something for your AI to say..."></textarea>
                            <button id="speakButton" class="btn secondary-btn">Speak Text</button>
                        </div>
                        
                        <div class="test-audio-player" style="display: none;">
                            <audio id="testAudio" controls></audio>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    
    <footer>
        <div class="container">
            <p>&copy; 2025 AI Voice Agent Creator</p>
        </div>
    </footer>
    
    <!-- Scripts -->
    <script src="/static/js/recorder.js"></script>
    <script src="/static/js/app.js"></script>
</body>
</html>
